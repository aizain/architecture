# SSH说明

> 什么是SSH
```
Secure Shell
创建在应用层和传输层基础上的安全协议，为计算机上的Shell提供安全的传输和使用环境
```

## 密钥对（公钥和私钥）
> 生成本用户的密钥对
```
ssh-keygen

常用参数：
-f filename 指定密钥文件名
-t type 指定要创建的密钥类型。可以使用："rsa1"(SSH-1) "rsa"(SSH-2) "dsa"(SSH-2)

使用后会生成：
id_rsa // 私钥
id_rsa.pub // 公钥
```

> 私钥
```
用于解密，由公钥加密过的消息，
比较重要，需要妥善保存
```

> 公钥
```
加密
用公钥加密后所得的信息，只能用私钥才能解密
```

> 登录验证流程
客户端首先向服务端发送密钥对的ID。
服务端检查文件authorized_keys寻找该ID的公钥。
如果找到，服务端生成一个随机数，并使用公钥加密这个数。
服务端将加密后的信息发送给客户端。
如果客户端拥有对应的私钥，那么就能使用私钥解密消息，得到服务端生成的随机数。
客户端使用解密后的数和会话使用的共享密钥得到一个值，然后计算这个值的MD5散列值。
客户端将这个MD5散列值发送回服务端。
服务端用会话共享密钥和生成的随机值计算得到自己的MD5散列值。然后比较客户端传回的值和自身生成的值。如果匹配，则证明客户端拥有私钥，客户端验证通过。
```