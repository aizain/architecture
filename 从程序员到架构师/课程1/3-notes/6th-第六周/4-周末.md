# 周末


```
空间索引
```

## LBS

> 基于位置的服务
```
特点：
知道我当前位置
匹配相应的项目给我
```

> 点距
```
((xa-x1)^2 + (ya-y1)^2)
```

> 空间索引
```
搜索离我最近的人
搜索我周围有多少人

类型：
球面空间索引
平面空间索引

坐标系转换

确认精度
2米 1米 1厘米
```

> 案例
```
简单空间索引 - 基于平面
[
  [{x:0,y:0,set:[],set:[]}, {x:1,y:0,set:[],set:[]}, ...]
  [...]
  ...
]
```

## docker集群
> 
```
https://docs.docker.com/get-started/part6/
```

## 并发冲突

> 秒杀
```
限购50件商品，描述

BUG:
50件，卖出100件 - 京东，订单被取消

竞争资源 - 库存量

竞争解决方案
1. 每个资源一个副本
2. 最终变为单线操作
3. 从不变量入手

高并发下，锁是最差的选择


解决方案：
1. 排队 - 多线变单线 - 分散爆发访问
2. 单队列保存50个1-50的kye - pop - 取出的是数值就有
```

> 抽奖
```
1 2 3等奖
抽奖人数不定/抽奖人数固定

队列存放奖品
数据结构+算法 控制抽奖概率
```