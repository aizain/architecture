# 第二天

```
项目分享地址：
https://github.com/yc384

水平分表
```

## mysql - 水平分表 - 分片

> 简述
```
// 分片
db_001
db_002

// 分表
index_login_0
index_login_1
index_login_3

以上为 上规模项目
```

> 分片
```
分片中间件：
mycat 阿里云drds

架构分类：
代理层 - 中间件接收多台查询连接，决定查询哪台数据库
逻辑连接 - 通过服务器上的组件/代码逻辑，决定连接哪台数据库
分发器 - 通过分发器，分发给所有数据库，每个数据库上跑相关程序，汇总结果

mysql不支持物理分区

何时考虑分片： - 最原始的目的是为了解决大数据存储问题
*1. 硬盘不够，数据盘不能扩容，磁盘的扩容问题 - 只能分片，不能分表 - 很常见
*2. 高并发写 - 不是十分常见
3. 磁盘IO效率，需要降低数据库的IO操作，需要将数据物理分布存储
4. 内存压力 - 有其他解决方案
5. 地区

mongodb是大数据入门级产品
```

> 分表
```
原则：
1. 按业务分表
2. 非业务通用分表
3. SAAS分库 - 主库/分库

命名：
1. 表后缀
业务无关 数值
业务相关 业务某值
```

> 作业
```
拷贝分享的项目跑起来
```
