# 第一天

```
gitlab
```

## gitlab

> 下载 gitlab 镜像
```
docker pull gitlab/gitlab-ce
```

> 运行 gitlab
```
```


## 设计表

> 三大范式
```
1 表字段都是元数据 - 即不可拆分
2 super(1) 每一行是一个唯一的实体 - 区分行，主键
3 原子性，尽量不要产生冗余

保证数据完整无误 - 数据库的完整性

一般不全适用于互联网应用
```

> OLTP/OLAP

> OLTP 
```
假定场景为OLTP
```

> 查询耗时
```
总：
数据搜索
数据读取与写入 IO

常见：
表扫描
笛卡尔积
读取数据大
```

## 表设计例子

> 用户表
```
user_reg // 注册之后不会更变
ip 地址 注册用户名 注册手机号 注册方式 注册时间 微博id 微信openid 微信unionid


绑定手机 昵称 姓名 生日 血型 QQ号
会员类型 会员级别
经验值 积分 账户余额 
收货地址 通讯地址
上次登录的ip 地点 设备
角色 权限
```

> 设计原则
```
可以通过计算字节数，算出每行大小
表不要过宽，指每单元的字节不要太多
开发过程中，能用少的字段，就不要用多的字段

新项目： 开发 -> 迭代 -> 重构 -> 开发 -> ...
1. 尽可能精简
2. 需要什么数据就添加，业务优先
3. 表重构 - 垂直分表

反人类：
在一开始时，就把接口定好

迭代：
随着开发，增加字段
```

> 重构表
```
四类：
元数据表
索引表
关联表
统计汇总信息表 

额外：
业务逻辑表
```

作业
```
设计用户的宽表
宽表重构
```



